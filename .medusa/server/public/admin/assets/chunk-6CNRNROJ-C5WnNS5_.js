import{cn as D,co as x,r as c,cp as g,k as q}from"./index-nuRy4NPt.js";var E=()=>{const[a,r]=c.useState(""),[s,t]=c.useState(""),n=c.useCallback(g(i=>t(i),300),[]);return c.useEffect(()=>(n(a),()=>n.cancel()),[a,n]),{searchValue:a,onSearchValueChange:r,query:s||void 0}},C=({queryKey:a,queryFn:r,getOptions:s,defaultValue:t,defaultValueKey:n,pageSize:i=10})=>{const{searchValue:u,onSearchValueChange:b,query:f}=E(),p=n||"id",{data:h}=D({queryKey:a,queryFn:async()=>r({[p]:t,limit:Array.isArray(t)?t.length:1}),enabled:!!t}),{data:d,...l}=x({queryKey:[...a,f],queryFn:async({pageParam:e=0})=>await r({q:f,limit:i,offset:e}),initialPageParam:0,getNextPageParam:e=>e.count>e.offset+e.limit?e.offset+e.limit:void 0,placeholderData:q}),o=(d==null?void 0:d.pages.flatMap(e=>s(e)))??[],m=h?s(h):[],v=!l.isPending&&!o.length&&!u;return t&&m.length&&!u&&m.forEach(e=>{o.find(y=>y.value===e.value)||o.unshift(e)}),{options:o,searchValue:u,onSearchValueChange:b,disabled:v,...l}};export{E as a,C as u};
